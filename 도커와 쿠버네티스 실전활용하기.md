## 도커와 쿠버네티스 실전활용하기

### 개요

- 참고하면 좋은 사이트

  - https://subicura.com/

  - 초보를 위한 쿠버네티스 안내서

    https://subicura.com/k8s/prepare/



### 서버 관리의 진화 과정

- 자체 서버 운영

  - 서버 설정 위해 많은 과정과 노력 필요
  - 명령어 등을 전부 외우고 있어야 실시간 관리 가능 / 참조하는 문서 신뢰도

- 설정 관리 도구 등장 (상태 관리 도구)

  - 한 서버에 여러가지 설치할 경우 안전 보장이 X

- 가상 머신의 등장

  - 한 서버에 여러 가지 설치도 되고, 현재 상태(버전 등)도 저장이 가능
  - **느리고**, 처음부터 다시 세팅이 어려우며, 서버 이미지 용량이 너무 큰 경우 공유가 어려움.

- AWS 등 클라우드 등장

  - 하드웨어 파편화 문제 해결
  - 가상화된 환경만으로 아키텍처 구성이 가능해짐

- PaaS 등장

  - Netlify 등

  - **소스 코드만으로 배포가 가능**

  - 대신 중간에 배포에 커스터마이징을 하고 싶은 경우 어려울 수 있음

  - 서버계의 은총?

  - PaaS 방식에 맞게 작성해야 하고, 서버에 대한 원격 접속이 불가능

  - 로그 수집 제한적 허용 등 단점도 다수이다.

    아래는 어려운 작업들의 예시이다.

    - 크론잡(문자 발송, 예약, 정산등)
    - 데이터분석
    - 로그 분석(클라우드와치 등)
    - 애플리케이션 서능 모니터링
    - 네트워크, 스토리지 설정 세부 관리

- 도커, 쿠버네티스 등장

  - **서버관리/개발 방식의 혁신**
    ![image-20210707104556471](../AppData/Roaming/Typora/typora-user-images/image-20210707104556471.png)
  - Jenkins를 이용해 아주 간단히 배포 가능
    - `docker-compose up` 명령어만으로, 배포 및 CI/CD 작업 준비가 완료
  - 복잡한 서버 관리를 간단하고 쉽게 가능하다.
  - 명령어도 통일되어 있어, 여러가지 외울 필요 없음.
  - 도커의 등장 후, 어떠한 프로그램도 **컨테이너**로 만들 수 있게 됨
    - 컨테이너? 격리된 환경에서 작동하는 프로세스
  - **오픈소스**, **어떤 클라우드에서도 사용이 가능**
  - 가상머신처럼 독립적으로 실행되지만, 더 빠르고, 더 쉬우며, 더 효율적이다.
    - 가상머신? 윈도우 위에 리눅스를 또 올린다(결국 VM에서 CPU, MEMORY 등을 차지함)
    - 도커? 하나 위에 새롭게 올리는 것이 아닌, 격리된 공간을 만들어주고 격리된 공간에서 프로그램이 각각 실행
  - 실행까지는 편하게 했으나, **배포의 문제**
    - 여러가지 서버가 있을 때, 각 서버를 멈췄다 run하는 과정을 각각 해줘야되고, 어느 서버에 여유가 있는 지 등도 확인이 불가능

- Container Orchestration

  - DEIS, MESOS, MARATHON, Nomad 등등
  - 복잡한 컨테이너 환경을 효과적으로 관리하기 위한 도구
  - 모니터링하다 직접 조치해줬어야 할 서버 문제를, 프로그램이 모니터링하여 해결해줌
  - 서버 생성, 배포 버전 관리, 부하가 적은 곳 자동 탐색
  - 수많은 프로그램들 중 **Kubernetes**로 정리됨
    - 일주일에 20억개의 컨테이너를 만드는 구글이 오픈소스로 만들어냄
    - 컨테이너를 쉽고 빠르게 배포/확장, 관리 자동화해주는 오픈소스 플랫폼
    - 클라우드 서버도 내 컴퓨터 내에서 모든 서버를 명령어로 중앙 제어가 가능
    - 사용하지 않을시, 각 서버에 접속하여 제어해야함

- 서비스메시 등장

